{% extends "base/_base.html" %}

{% block title %}CRUD de Clientes{% endblock %}

{% block content %}
<h1>Clientes</h1>

<!-- Formulário para criar ou editar cliente -->
<h2>{% if cliente %}Editar Cliente{% else %}Novo Cliente{% endif %}</h2>
<form method="POST" action="{% if cliente %}{% url 'editar_cliente' cliente.pk %}{% else %}{% url 'criar_cliente' %}{% endif %}">
    {% csrf_token %}
    <label for="nome">Nome:</label>
    <input type="text" name="nome" id="nome" value="{{ cliente.nome|default:'' }}" required><br>

    <label for="cpf">CPF:</label>
    <input type="text" name="cpf" id="cpf" value="{{ cliente.cpf|default:'' }}" required><br>

    <label for="email">Email:</label>
    <input type="email" name="email" id="email" value="{{ cliente.email|default:'' }}"><br>

    <button type="submit">{% if cliente %}Atualizar{% else %}Cadastrar{% endif %}</button>
</form>

<hr>

<!-- Lista de clientes -->
<h2>Lista de Clientes</h2>
{% if clientes %}
<table border="1" cellpadding="5">
    <thead>
        <tr>
            <th>Nome</th>
            <th>CPF</th>
            <th>Email</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for c in clientes %}
        <tr>
            <td>{{ c.nome }}</td>
            <td>{{ c.cpf }}</td>
            <td>{{ c.email }}</td>
            <td>
                <a href="{% url 'editar_cliente' c.pk %}">Editar</a> |
                <a href="{% url 'deletar_cliente' c.pk %}">Deletar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>Nenhum cliente cadastrado.</p>
{% endif %}
{% endblock %}
